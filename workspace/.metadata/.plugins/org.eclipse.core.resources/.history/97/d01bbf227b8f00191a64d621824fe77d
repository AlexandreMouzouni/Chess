package jeu;

import java.util.ArrayList;
import java.util.List;
import com.modeliosoft.modelio.javadesigner.annotations.objid;

@objid ("986f6e8d-eb0d-4f6e-969c-48164f7032dd")

/*
 * Un échiquier contient l'instant du jeu à un instant. Il comporte:
 * - les pièces.
 * - le droit de roque.
 * - le tour actuel.
 * - la case en passant.
 * 
 * Les autres règles relative aux tours, comme la triple répétition 
 */
public class Echiquier {
	// Les pièces.
    private Piece[][] plateau = new Piece[8][8];
    // Les roques possibles. Au début, tout les roques sont possibles.
    private boolean[] roquesPossibles = {true, true, true, true};
    // Le tour actuel. Le premier tour est toujours aux blancs.
    private boolean tourAJouer = Couleur.BLANC;
    private int[] enPassant = new int[2]; // Position en passant
    
    public Echiquier() {
    	init();
    }
    /*
     * Initialise l'échiquer avec un plateau. La position de départ est toujours la même.
     * 
     *   0 1 2 3 4 5 6 7
     * 0 ♜ ♞ ♝ ♚ ♛ ♝ ♞ ♜
     * 1 ♟ ♟ ♟ ♟ ♟ ♟ ♟ ♟
     * 2
     * 3
     * 4
     * 5
     * 6 ♙ ♙ ♙ ♙ ♙ ♙ ♙ ♙
     * 7 ♖ ♘ ♗ ♕ ♔ ♗ ♘ ♖
     */
    
    
    public void init() {
    /*
    setPiece(0,0, new Tour(Couleur.NOIR, 0,0));
    setPiece(1,0, new Cavalier(Couleur.NOIR, 1,0));
    setPiece(2,0, new Fou(Couleur.NOIR, 2,0));
    setPiece(3,0, new Roi(Couleur.NOIR, 3,0));
    setPiece(4,0, new Reine(Couleur.NOIR, 4,0));
    setPiece(5,0, new Fou(Couleur.NOIR, 5,0));
    setPiece(6,0, new Cavalier(Couleur.NOIR, 6,0));
    setPiece(7,0, new Tour(Couleur.NOIR, 7,0));
    */
    	for (int i =0; i<8;i++) {
    		setPiece(i,0, new Tour(Couleur.NOIR, i,0));
    	}
    	//this.setPiece(0, 0, new Tour);
    }
    
    public Piece[][] getPlateau() {
    	return this.plateau;
    }
    
    public Piece getPiece(Position pos) {
    	return this.getPiece(pos.x, pos.y);
    }
    
    public Piece getPiece(int x, int y) {
    	// Représentation matricielle: les tableaux sont orientés de l'autre sens
    	//, cad on a un tableau composé de tableaux.
    	// [ [0, 1, 2, 3, 4, 5, 6, 7]
    	//   [0, 1, 2, 3, 4, 5, 6, 7] ...
    	//   ...
    	// ..[0, 1, 2, 3, 4, 5, 6, 7] ]
    	// En matricielle, quand on fait tab[0][1] , on accède à la case a x = 1 et y = 0.
    	// Les nombres sont donc dans le sens inversés.
    	return this.plateau[y][x];
    }
    
    public boolean containsPiece(Position pos) {
    	return this.containsPiece(pos.x, pos.y);
    }
    
    public boolean containsPiece(int ligne, int colonne) {
    	if (this.getPiece(ligne, colonne) == null) {
    		return false;
    	} else {
    		return true;
    	}
    }
    
    public void setPiece(Position pos, Piece p) {
    	this.setPiece(pos.x, pos.y, p);
    }
    
    public void setPiece(int x, int y, Piece p) {
    	this.plateau[y][x] = p;
    }

    public void afficher() {
    	Piece[][] plateau = this.getPlateau();
    	
    	String s = "";
    	
    	for(int i=0; i<plateau.length;i++) {
    		for (int j=0; j<plateau[i].length;j++) {
    			
    			if (plateau[i].length -1 ==j) {
    				s +=  plateau[i][j];
    			}
    			else {
    				s +=  plateau[i][j]+" ";
    			}
    		}
    		s = s+ "\n";
    	}
    	
    	System.out.println(s);
    }
    //public Echiquier deplacement(int xDepart, int yDepart, int xArrivee, int yArrivee) {}
    
    public static void main(String[] args) {
    	Echiquier e = new Echiquier();
    	e.afficher();
    	e.init();
    }
}